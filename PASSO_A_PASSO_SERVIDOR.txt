â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         PASSO A PASSO - SERVIDOR DO TRABALHO             â•‘
â•‘     (Onde o IP estÃ¡ liberado para API BTG)               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Autor: Murilo Molina (murilo.molina@gmail.com)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¥ PASSO 1: TRANSFERIR PROJETO PARA O SERVIDOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. FaÃ§a download de TODO este projeto
2. Copie para o servidor (exemplo: C:\BTGTicketsAPI)
3. Certifique-se de ter TODOS os arquivos:
   âœ“ Controllers/
   âœ“ Models/
   âœ“ Properties/
   âœ“ *.cs, *.json, *.md, *.ps1

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš™ï¸ PASSO 2: INSTALAR .NET 8 SDK (se nÃ£o tiver)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Acesse: https://dotnet.microsoft.com/download/dotnet/8.0
2. Baixe: .NET 8.0 SDK (x64)
3. Execute o instalador
4. ApÃ³s instalar, abra PowerShell e teste:
   
   dotnet --version
   
   Deve mostrar: 8.0.xxx

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” PASSO 3: CONFIGURAR CREDENCIAIS BTG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Abra PowerShell COMO ADMINISTRADOR e execute:

[System.Environment]::SetEnvironmentVariable('BTG_CLIENT_ID', '4fvga0jg4u8ui9f5p6e1ijs5mp', 'Machine')

[System.Environment]::SetEnvironmentVariable('BTG_CLIENT_SECRET', '121u3fnttukef8jankq12sn4sf7mg90mcpsgvm7ktn61qni032g5', 'Machine')

Verifique se funcionou:

[System.Environment]::GetEnvironmentVariable('BTG_CLIENT_ID', 'Machine')

Deve retornar: 4fvga0jg4u8ui9f5p6e1ijs5mp

IMPORTANTE: Feche e abra o PowerShell novamente!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ PASSO 4: EDITAR CONFIGURAÃ‡ÃƒO (OPCIONAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Abra o arquivo: appsettings.json

Altere o campo "CreatedBy" para seu nome:

{
  "BTG": {
    "Environment": "UAT",
    "CreatedBy": "SEU_NOME_COMPLETO",
    ...
  }
}

Salve o arquivo.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ PASSO 5: COMPILAR E EXECUTAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpÃ§Ã£o A - AutomÃ¡tico (Recomendado):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

No PowerShell, na pasta do projeto:

  .\setup-servidor.ps1

Este script faz tudo automaticamente:
- Verifica .NET SDK
- Verifica variÃ¡veis de ambiente
- Restaura dependÃªncias
- Compila o projeto
- Exibe resumo


OpÃ§Ã£o B - Manual:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

No PowerShell, na pasta do projeto:

  cd C:\BTGTicketsAPI
  
  dotnet restore
  
  dotnet build --configuration Release
  
  dotnet run

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª PASSO 6: TESTAR A API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Aguarde atÃ© ver:
  "Now listening on: http://[::]:5000"
  "Application started."

1. Abra o navegador do servidor
2. Acesse: http://localhost:5000/swagger
3. VocÃª verÃ¡ a interface Swagger com todos os endpoints


TESTE 1: AutenticaÃ§Ã£o
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Localize: POST /BTGTickets/autenticacao
2. Clique em "Try it out"
3. Clique em "Execute"

âœ… SUCESSO: Retorna um access_token
âŒ ERRO 403: IP nÃ£o liberado (improvÃ¡vel no servidor)


TESTE 2: Buscar Atributos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Copie o access_token do teste anterior
2. Localize: GET /BTGTickets/tickets/attributes
3. No campo "Authorization", cole:
   Bearer SEU_TOKEN_AQUI
4. Execute

âœ… SUCESSO: Lista de canais, tipos, cÃ³digos


TESTE 3: Criar Ticket
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Localize: POST /BTGTickets/tickets/create
2. Cole este JSON (ajuste o AccessToken):

{
  "AccessToken": "COLE_SEU_TOKEN_AQUI",
  "Document": "12345678901",
  "phoneAreaCode": "11",
  "phoneNumber": "987654321",
  "channel": "PHONE",
  "type": "OUTBOUND"
}

3. Execute

âœ… SUCESSO: Retorna ticketId

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š PASSO 7: TESTES COMPLETOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Execute TODOS os testes conforme documentado em:

  TESTES_FUNCIONAIS.md

Checklist:
  [ ] Teste 1 - AutenticaÃ§Ã£o âœ“
  [ ] Teste 2 - Buscar Atributos âœ“
  [ ] Teste 3 - Criar Ticket âœ“
  [ ] Teste 4 - Adicionar Contrato âœ“
  [ ] Teste 5 - Encerrar Ticket âœ“
  [ ] Teste 6 - Attempt Ticket âœ“
  [ ] Teste 7 - Batch Attempts âœ“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ†˜ PROBLEMAS COMUNS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Erro: "dotnet command not found"
â†’ .NET SDK nÃ£o instalado ou nÃ£o estÃ¡ no PATH
â†’ Reinstale o .NET SDK e reinicie o PowerShell

Erro: "Port 5000 already in use"
â†’ Outra aplicaÃ§Ã£o usando a porta
â†’ Execute: netstat -ano | findstr :5000
â†’ Encerre o processo: taskkill /PID <PID> /F

Erro: "403 Forbidden" ao autenticar
â†’ IP nÃ£o liberado pela BTG (improvÃ¡vel neste servidor)
â†’ Credenciais incorretas
â†’ Verifique as variÃ¡veis de ambiente

Erro: "VariÃ¡veis de ambiente nÃ£o encontradas"
â†’ PowerShell nÃ£o reiniciado apÃ³s configuraÃ§Ã£o
â†’ Feche e abra novamente o PowerShell
â†’ Ou configure na sessÃ£o atual:
   $env:BTG_CLIENT_ID = "4fvga0jg4u8ui9f5p6e1ijs5mp"
   $env:BTG_CLIENT_SECRET = "121u3fnttukef8jankq12sn4sf7mg90mcpsgvm7ktn61qni032g5"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

README.md
  â†’ VisÃ£o geral completa do projeto

INSTALACAO_SERVIDOR.md
  â†’ Guia detalhado de instalaÃ§Ã£o
  â†’ Deploy IIS, ServiÃ§o Windows, Linux
  â†’ 10+ pÃ¡ginas de documentaÃ§Ã£o

TESTES_FUNCIONAIS.md
  â†’ Roteiro completo de testes
  â†’ 7 testes funcionais detalhados
  â†’ Exemplos PowerShell e cURL

GUIA_DEPLOY_SERVIDOR.md
  â†’ Guia rÃ¡pido de deploy
  â†’ 15-30 minutos

RESUMO_PROJETO.txt
  â†’ Resumo executivo completo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de testar:
  [ ] Projeto copiado para o servidor
  [ ] .NET 8 SDK instalado
  [ ] VariÃ¡veis de ambiente configuradas
  [ ] PowerShell reiniciado
  [ ] appsettings.json editado (CreatedBy)

Durante os testes:
  [ ] dotnet run executado sem erros
  [ ] Swagger acessÃ­vel (http://localhost:5000/swagger)
  [ ] AutenticaÃ§Ã£o funcionando (token recebido)
  [ ] Criar ticket funcionando (ticketId recebido)
  [ ] Todos os 7 testes executados

ApÃ³s validaÃ§Ã£o:
  [ ] Documentar resultados
  [ ] Configurar para produÃ§Ã£o (se necessÃ¡rio)
  [ ] Deploy no IIS (opcional)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸ TEMPO ESTIMADO: 15-30 minutos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Desenvolvido por: Murilo Molina
E-mail: murilo.molina@gmail.com
Data: Outubro 2025

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
